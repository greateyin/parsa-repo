{{ define "main" }}
<!-- Hero Section -->
{{ partial "content/hero.html" . }}

<!-- Featured Articles Section -->
{{ $featured := where .Site.RegularPages "Params.featured" true | first 2 }}
{{ if $featured }}
<section id="featured" class="py-16 lg:py-20 bg-gray-50 dark:bg-gray-900/50">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12 lg:mb-16">
      <h2 class="text-3xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-4xl lg:text-5xl">
        {{ i18n "featured_articles" | default "Featured Articles" }}
      </h2>
      <p class="mt-4 text-lg leading-8 text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
        {{ i18n "featured_description" | default "Discover our most popular and trending articles" }}
      </p>
    </div>
    
    <div class="responsive-grid-1 sm:responsive-grid-2 gap-6 lg:gap-8 stagger-grid">
      {{ range $featured }}
        {{ partial "content/featured-card.html" . }}
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Latest Articles Section -->
{{ $regular := where .Site.RegularPages "Params.featured" "!=" true | first 12 }}
{{ if $regular }}
<section class="py-16 lg:py-20">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between mb-12 lg:mb-16">
      <div>
        <h2 class="text-3xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-4xl lg:text-5xl">
          {{ i18n "latest_articles" | default "Latest Articles" }}
        </h2>
        <p class="mt-4 text-lg leading-8 text-gray-600 dark:text-gray-300">
          {{ i18n "latest_description" | default "Stay updated with our newest content" }}
        </p>
      </div>
      
      <!-- View All Link -->
      <div class="hidden lg:block">
        <a href="{{ "/posts" | relLangURL }}" 
           class="inline-flex items-center rounded-md bg-white px-3.5 py-2.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:text-white dark:ring-gray-600 dark:hover:bg-gray-700">
          {{ i18n "view_all" | default "View All" }}
          <svg class="ml-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
          </svg>
        </a>
      </div>
    </div>
    
    <!-- Enhanced Responsive Articles Grid -->
    <div class="responsive-grid-1 sm:responsive-grid-2 lg:responsive-grid-3 xl:responsive-grid-4 gap-6 lg:gap-8 stagger-grid">
      {{ range $regular }}
        {{ partial "content/article-card.html" . }}
      {{ end }}
    </div>
    
    <!-- Mobile View All Button -->
    <div class="text-center mt-12 lg:hidden">
      <a href="{{ "/posts" | relLangURL }}" 
         class="inline-flex items-center rounded-md bg-blue-600 px-6 py-3 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
        {{ i18n "view_all_articles" | default "View All Articles" }}
        <svg class="ml-2 h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
        </svg>
      </a>
    </div>
  </div>
</section>
{{ end }}

<!-- Categories Section -->
{{ if .Site.Taxonomies.categories }}
<section class="py-16 bg-muted/30">
  <div class="container mx-auto px-4">
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold mb-4">
        {{ i18n "browseCategories" | default "Browse Categories" }}
      </h2>
      <p class="text-muted-foreground max-w-2xl mx-auto">
        {{ i18n "categoriesDescription" | default "Explore articles by topic and find what interests you most" }}
      </p>
    </div>
    
    <div class="responsive-grid-2 md:responsive-grid-3 lg:responsive-grid-4 gap-4 max-w-6xl mx-auto stagger-grid">
      {{ range $name, $taxonomy := .Site.Taxonomies.categories }}
      <a href="{{ "/categories/" | relLangURL }}{{ $name | urlize }}" 
         class="group touch-target mobile-p sm:p-6 bg-card border border-border rounded-lg hover:shadow-lg hover:border-primary/50 transition-all duration-300 card-hover-effect focus-visible:ring-enhanced active:scale-98 scroll-fade-in">
        <div class="text-center">
          <h3 class="font-semibold responsive-text-base text-foreground group-hover:text-primary transition-colors mb-2">
            {{ $name | title }}
          </h3>
          <p class="responsive-text-sm text-muted-foreground">
            {{ len $taxonomy }} {{ if eq (len $taxonomy) 1 }}{{ i18n "article" | default "article" }}{{ else }}{{ i18n "articles" | default "articles" }}{{ end }}
          </p>
        </div>
      </a>
      {{ end }}
    </div>
    
    <div class="text-center mt-8">
      <a href="{{ "/categories" | relLangURL }}" 
         class="inline-flex items-center text-primary hover:text-primary/80 transition-colors">
        {{ i18n "viewAllCategories" | default "View All Categories" }}
        <svg class="w-4 h-4 ml-2" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
        </svg>
      </a>
    </div>
  </div>
</section>
{{ end }}

<!-- Newsletter/CTA Section (Optional) -->
{{ if .Site.Params.newsletter.enabled }}
<section class="py-16">
  <div class="container mx-auto px-4">
    <div class="max-w-2xl mx-auto text-center bg-gradient-to-r from-primary/10 to-accent/10 rounded-2xl p-8 md:p-12">
      <h2 class="text-3xl font-bold mb-4">
        {{ .Site.Params.newsletter.title | default "Stay Updated" }}
      </h2>
      <p class="text-muted-foreground mb-8">
        {{ .Site.Params.newsletter.description | default "Get the latest articles delivered straight to your inbox" }}
      </p>
      
      <form class="flex flex-col sm:flex-row gap-4 max-w-md mx-auto">
        <input type="email" 
               placeholder="{{ i18n "emailPlaceholder" | default "Enter your email" }}"
               class="flex-1 px-4 py-3 rounded-lg border border-border bg-background text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
        <button type="submit" 
                class="px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors whitespace-nowrap">
          {{ i18n "subscribe" | default "Subscribe" }}
        </button>
      </form>
    </div>
  </div>
</section>
{{ end }}

<!-- Custom CSS for animations -->
<style>
  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  @keyframes fade-in-up {
    from { 
      opacity: 0; 
      transform: translateY(30px); 
    }
    to { 
      opacity: 1; 
      transform: translateY(0); 
    }
  }
  
  .animate-fade-in {
    animation: fade-in 0.8s ease-out;
  }
  
  .animate-fade-in-up {
    animation: fade-in-up 0.8s ease-out;
  }
  
  .animation-delay-200 {
    animation-delay: 0.2s;
    animation-fill-mode: both;
  }
  
  .animation-delay-400 {
    animation-delay: 0.4s;
    animation-fill-mode: both;
  }
  
  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .animate-fade-in,
    .animate-fade-in-up {
      animation: none;
    }
  }
</style>
{{ end }}