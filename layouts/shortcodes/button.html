{{/*
Enhanced Button Shortcode with modern styling
Usage: {{< button href="https://example.com" type="primary" size="lg" target="_blank" >}}Button Text{{< /button >}}
*/}}

{{- $href := .Get "href" -}}
{{- $type := .Get "type" | default "primary" -}}
{{- $size := .Get "size" | default "md" -}}
{{- $target := .Get "target" -}}
{{- $rel := .Get "rel" -}}
{{- $class := .Get "class" -}}
{{- $icon := .Get "icon" -}}
{{- $iconPosition := .Get "iconPosition" | default "left" -}}

{{- $typeClasses := dict 
  "primary" "bg-primary text-primary-foreground hover:bg-primary/90"
  "secondary" "bg-secondary text-secondary-foreground hover:bg-secondary/80"
  "outline" "border border-input bg-background hover:bg-accent hover:text-accent-foreground"
  "ghost" "hover:bg-accent hover:text-accent-foreground"
  "link" "text-primary underline-offset-4 hover:underline"
-}}

{{- $sizeClasses := dict 
  "sm" "h-9 px-3 text-sm"
  "md" "h-10 px-4 py-2"
  "lg" "h-11 px-8 text-lg"
  "xl" "h-12 px-10 text-xl"
-}}

{{- $baseClasses := "inline-flex items-center justify-center whitespace-nowrap rounded-md font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50" -}}

{{- $buttonClasses := printf "%s %s %s" $baseClasses (index $typeClasses $type) (index $sizeClasses $size) -}}

{{- if $href -}}
  <a 
    href="{{ $href }}"
    {{ with $target }}target="{{ . }}"{{ end }}
    {{ with $rel }}rel="{{ . }}"{{ else }}{{ if eq $target "_blank" }}rel="noopener noreferrer"{{ end }}{{ end }}
    class="{{ $buttonClasses }} {{ with $class }}{{ . }}{{ end }}">
    
    {{- if and $icon (eq $iconPosition "left") -}}
    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="{{ $icon }}"/>
    </svg>
    {{- end -}}
    
    {{ .Inner }}
    
    {{- if and $icon (eq $iconPosition "right") -}}
    <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="{{ $icon }}"/>
    </svg>
    {{- end -}}
  </a>
{{- else -}}
  <button 
    type="button"
    class="{{ $buttonClasses }} {{ with $class }}{{ . }}{{ end }}">
    
    {{- if and $icon (eq $iconPosition "left") -}}
    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="{{ $icon }}"/>
    </svg>
    {{- end -}}
    
    {{ .Inner }}
    
    {{- if and $icon (eq $iconPosition "right") -}}
    <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="{{ $icon }}"/>
    </svg>
    {{- end -}}
  </button>
{{- end -}}