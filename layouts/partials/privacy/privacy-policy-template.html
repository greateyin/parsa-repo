{{/*
  Default Privacy Policy Template
  Generates a comprehensive privacy policy based on enabled services
  Usage: {{ partial "privacy/privacy-policy-template.html" . }}
*/}}

{{/* Load validated configuration */}}
{{ partial "helpers/config-validation.html" . }}
{{ $config := .Page.Store.Get "validatedConfig" }}

<div class="privacy-policy-content">
  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-4">Introduction</h2>
    <p class="mb-4">
      This Privacy Policy describes how {{ site.Title }} ("we", "our", or "us") collects, uses, and protects your personal information when you visit our website at {{ site.BaseURL }} (the "Service").
    </p>
    <p class="mb-4">
      We are committed to protecting your privacy and ensuring transparency about our data practices. This policy explains what information we collect, how we use it, and your rights regarding your personal data.
    </p>
  </section>

  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-4">Information We Collect</h2>
    
    <h3 class="text-xl font-medium mb-3">Automatically Collected Information</h3>
    <p class="mb-4">
      When you visit our website, we may automatically collect certain information about your device and usage patterns, including:
    </p>
    <ul class="list-disc pl-6 mb-4 space-y-1">
      <li>IP address ({{ if $config.privacy.anonymizeIP }}anonymized{{ else }}full{{ end }})</li>
      <li>Browser type and version</li>
      <li>Operating system</li>
      <li>Pages visited and time spent on each page</li>
      <li>Referring website</li>
      <li>Date and time of visits</li>
    </ul>

    {{ if $config.googleAnalytics.enabled }}
    <h3 class="text-xl font-medium mb-3">Analytics Information</h3>
    <p class="mb-4">
      We use Google Analytics to understand how visitors interact with our website. This service collects information such as:
    </p>
    <ul class="list-disc pl-6 mb-4 space-y-1">
      <li>Pages viewed and user interactions</li>
      <li>Session duration and bounce rate</li>
      <li>Geographic location (country/city level)</li>
      <li>Device and browser information</li>
      <li>Traffic sources and referrals</li>
    </ul>
    {{ end }}

    {{ if $config.facebookPixel.enabled }}
    <h3 class="text-xl font-medium mb-3">Advertising and Marketing Information</h3>
    <p class="mb-4">
      We use Facebook Pixel to measure the effectiveness of our advertising and provide personalized content. This may include:
    </p>
    <ul class="list-disc pl-6 mb-4 space-y-1">
      <li>Pages visited and actions taken</li>
      <li>Products or content viewed</li>
      <li>Conversion events (if applicable)</li>
      <li>Custom audience data for advertising</li>
    </ul>
    {{ end }}
  </section>

  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-4">How We Use Your Information</h2>
    <p class="mb-4">We use the collected information for the following purposes:</p>
    
    <div class="space-y-4">
      <div class="border-l-4 border-blue-500 pl-4">
        <h3 class="font-medium">Website Operation and Improvement</h3>
        <p class="text-sm text-gray-600">
          <strong>Legal Basis:</strong> Legitimate Interest<br>
          <strong>Purpose:</strong> Ensure website functionality, security, and performance optimization
        </p>
      </div>

      {{ if $config.googleAnalytics.enabled }}
      <div class="border-l-4 border-green-500 pl-4">
        <h3 class="font-medium">Analytics and Statistics</h3>
        <p class="text-sm text-gray-600">
          <strong>Legal Basis:</strong> {{ if $config.privacy.cookieConsent }}Consent{{ else }}Legitimate Interest{{ end }}<br>
          <strong>Purpose:</strong> Understand user behavior, improve content, and optimize user experience<br>
          <strong>Retention:</strong> 26 months (Google Analytics default)
        </p>
      </div>
      {{ end }}

      {{ if $config.adsense.enabled }}
      <div class="border-l-4 border-yellow-500 pl-4">
        <h3 class="font-medium">Advertising</h3>
        <p class="text-sm text-gray-600">
          <strong>Legal Basis:</strong> {{ if $config.privacy.cookieConsent }}Consent{{ else }}Legitimate Interest{{ end }}<br>
          <strong>Purpose:</strong> Display relevant advertisements and measure their effectiveness<br>
          <strong>Retention:</strong> Up to 13 months
        </p>
      </div>
      {{ end }}

      {{ if $config.facebookPixel.enabled }}
      <div class="border-l-4 border-purple-500 pl-4">
        <h3 class="font-medium">Marketing and Remarketing</h3>
        <p class="text-sm text-gray-600">
          <strong>Legal Basis:</strong> Consent<br>
          <strong>Purpose:</strong> Personalized advertising, conversion tracking, and audience building<br>
          <strong>Retention:</strong> Up to 180 days (Facebook default)
        </p>
      </div>
      {{ end }}
    </div>
  </section>

  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-4">Third-Party Services</h2>
    <p class="mb-4">We use the following third-party services that may collect and process your personal data:</p>
    
    <div class="space-y-4">
      {{ if $config.googleAnalytics.enabled }}
      <div class="bg-gray-50 p-4 rounded">
        <h3 class="font-medium mb-2">Google Analytics</h3>
        <p class="text-sm mb-2">
          Google Analytics helps us understand how visitors use our website. Google may use this data for their own purposes.
        </p>
        <p class="text-xs text-gray-600">
          <strong>Privacy Policy:</strong> <a href="https://policies.google.com/privacy" target="_blank" rel="noopener" class="text-blue-600 hover:underline">https://policies.google.com/privacy</a><br>
          <strong>Opt-out:</strong> <a href="https://tools.google.com/dlpage/gaoptout" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Google Analytics Opt-out Browser Add-on</a>
        </p>
      </div>
      {{ end }}

      {{ if $config.adsense.enabled }}
      <div class="bg-gray-50 p-4 rounded">
        <h3 class="font-medium mb-2">Google AdSense</h3>
        <p class="text-sm mb-2">
          Google AdSense displays advertisements on our website. Google uses cookies to serve ads based on your interests.
        </p>
        <p class="text-xs text-gray-600">
          <strong>Privacy Policy:</strong> <a href="https://policies.google.com/privacy" target="_blank" rel="noopener" class="text-blue-600 hover:underline">https://policies.google.com/privacy</a><br>
          <strong>Ad Settings:</strong> <a href="https://adssettings.google.com/" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Google Ad Settings</a>
        </p>
      </div>
      {{ end }}

      {{ if $config.facebookPixel.enabled }}
      <div class="bg-gray-50 p-4 rounded">
        <h3 class="font-medium mb-2">Facebook Pixel</h3>
        <p class="text-sm mb-2">
          Facebook Pixel helps us measure the effectiveness of our advertising and provide personalized content.
        </p>
        <p class="text-xs text-gray-600">
          <strong>Privacy Policy:</strong> <a href="https://www.facebook.com/privacy/explanation" target="_blank" rel="noopener" class="text-blue-600 hover:underline">https://www.facebook.com/privacy/explanation</a><br>
          <strong>Ad Preferences:</strong> <a href="https://www.facebook.com/ads/preferences/" target="_blank" rel="noopener" class="text-blue-600 hover:underline">Facebook Ad Preferences</a>
        </p>
      </div>
      {{ end }}

      {{ if $config.googleCustomSearch.value }}
      <div class="bg-gray-50 p-4 rounded">
        <h3 class="font-medium mb-2">Google Custom Search</h3>
        <p class="text-sm mb-2">
          Our search functionality is powered by Google Custom Search Engine, which may collect search queries and usage data.
        </p>
        <p class="text-xs text-gray-600">
          <strong>Privacy Policy:</strong> <a href="https://policies.google.com/privacy" target="_blank" rel="noopener" class="text-blue-600 hover:underline">https://policies.google.com/privacy</a>
        </p>
      </div>
      {{ end }}
    </div>
  </section>

  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-4">Cookies and Tracking Technologies</h2>
    <p class="mb-4">
      We use cookies and similar tracking technologies to enhance your browsing experience and collect usage information. Cookies are small text files stored on your device.
    </p>

    <h3 class="text-xl font-medium mb-3">Types of Cookies We Use</h3>
    <div class="space-y-3">
      <div>
        <h4 class="font-medium">Essential Cookies</h4>
        <p class="text-sm text-gray-600">Required for the website to function properly. These cannot be disabled.</p>
      </div>

      {{ if $config.googleAnalytics.enabled }}
      <div>
        <h4 class="font-medium">Analytics Cookies</h4>
        <p class="text-sm text-gray-600">Help us understand how visitors interact with our website (Google Analytics).</p>
      </div>
      {{ end }}

      {{ if or $config.adsense.enabled $config.facebookPixel.enabled }}
      <div>
        <h4 class="font-medium">Advertising Cookies</h4>
        <p class="text-sm text-gray-600">Used to display relevant advertisements and measure their effectiveness.</p>
      </div>
      {{ end }}

      <div>
        <h4 class="font-medium">Performance Cookies</h4>
        <p class="text-sm text-gray-600">Help us optimize website performance and loading times.</p>
      </div>
    </div>

    {{ if $config.privacy.cookieConsent }}
    <div class="mt-4 p-4 bg-blue-50 rounded">
      <p class="text-sm">
        <strong>Cookie Consent:</strong> We respect your choice regarding cookies. You can manage your cookie preferences using our cookie settings panel or through your browser settings.
      </p>
    </div>
    {{ end }}
  </section>

  {{ if $config.privacy.respectDoNotTrack }}
  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-4">Do Not Track</h2>
    <p class="mb-4">
      We respect the "Do Not Track" (DNT) browser setting. When DNT is enabled in your browser, we will not load tracking scripts or collect analytics data.
    </p>
    <p class="text-sm text-gray-600">
      To enable Do Not Track, please refer to your browser's privacy settings documentation.
    </p>
  </section>
  {{ end }}

  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-4">Your Rights Under GDPR</h2>
    <p class="mb-4">
      If you are located in the European Union, you have the following rights regarding your personal data:
    </p>
    
    <div class="grid md:grid-cols-2 gap-4">
      <div class="space-y-3">
        <div>
          <h4 class="font-medium">Right to be Informed</h4>
          <p class="text-sm text-gray-600">You have the right to know how your data is collected and used.</p>
        </div>
        
        <div>
          <h4 class="font-medium">Right of Access</h4>
          <p class="text-sm text-gray-600">You can request a copy of the personal data we hold about you.</p>
        </div>
        
        <div>
          <h4 class="font-medium">Right to Rectification</h4>
          <p class="text-sm text-gray-600">You can request correction of inaccurate personal data.</p>
        </div>
        
        <div>
          <h4 class="font-medium">Right to Erasure</h4>
          <p class="text-sm text-gray-600">You can request deletion of your personal data ("right to be forgotten").</p>
        </div>
      </div>
      
      <div class="space-y-3">
        <div>
          <h4 class="font-medium">Right to Restrict Processing</h4>
          <p class="text-sm text-gray-600">You can request limitation of how we process your data.</p>
        </div>
        
        <div>
          <h4 class="font-medium">Right to Data Portability</h4>
          <p class="text-sm text-gray-600">You can request your data in a portable format.</p>
        </div>
        
        <div>
          <h4 class="font-medium">Right to Object</h4>
          <p class="text-sm text-gray-600">You can object to processing based on legitimate interests.</p>
        </div>
        
        <div>
          <h4 class="font-medium">Rights Related to Automated Decision Making</h4>
          <p class="text-sm text-gray-600">Protection against automated profiling and decision making.</p>
        </div>
      </div>
    </div>

    {{ if $config.privacy.cookieConsent }}
    <div class="mt-6 p-4 bg-green-50 rounded">
      <h4 class="font-medium mb-2">Exercise Your Rights</h4>
      <p class="text-sm mb-3">You can exercise many of these rights directly through our privacy controls:</p>
      <div class="flex flex-wrap gap-2">
        <button onclick="window.ThemePrivacy.showConsentSettings()" class="text-xs bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700">
          Manage Cookies
        </button>
        <button onclick="window.ThemeGDPR.exportUserData()" class="text-xs bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700">
          Download Data
        </button>
        <button onclick="if(confirm('Delete all data?')) window.ThemeGDPR.deleteUserData()" class="text-xs bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700">
          Delete Data
        </button>
      </div>
    </div>
    {{ end }}
  </section>

  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-4">Data Security</h2>
    <p class="mb-4">
      We implement appropriate technical and organizational measures to protect your personal data against unauthorized access, alteration, disclosure, or destruction.
    </p>
    <ul class="list-disc pl-6 mb-4 space-y-1">
      <li>HTTPS encryption for all data transmission</li>
      <li>Regular security updates and monitoring</li>
      <li>Access controls and authentication measures</li>
      <li>Data minimization and retention policies</li>
    </ul>
  </section>

  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-4">International Data Transfers</h2>
    <p class="mb-4">
      Some of our third-party service providers may be located outside the European Economic Area (EEA). When we transfer your data internationally, we ensure appropriate safeguards are in place:
    </p>
    <ul class="list-disc pl-6 mb-4 space-y-1">
      <li>Adequacy decisions by the European Commission</li>
      <li>Standard Contractual Clauses (SCCs)</li>
      <li>Binding Corporate Rules (BCRs)</li>
      <li>Certification schemes and codes of conduct</li>
    </ul>
  </section>

  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-4">Children's Privacy</h2>
    <p class="mb-4">
      Our website is not intended for children under the age of 16. We do not knowingly collect personal information from children under 16. If you are a parent or guardian and believe your child has provided us with personal information, please contact us immediately.
    </p>
  </section>

  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-4">Changes to This Privacy Policy</h2>
    <p class="mb-4">
      We may update this Privacy Policy from time to time to reflect changes in our practices or applicable laws. We will notify you of any material changes by:
    </p>
    <ul class="list-disc pl-6 mb-4 space-y-1">
      <li>Posting the updated policy on this page</li>
      <li>Updating the "Last updated" date at the top of this policy</li>
      <li>Providing prominent notice on our website (for significant changes)</li>
    </ul>
    <p class="mb-4">
      We encourage you to review this Privacy Policy periodically to stay informed about how we protect your information.
    </p>
  </section>

  <section class="mb-8">
    <h2 class="text-2xl font-semibold mb-4">Legal Basis for Processing</h2>
    <p class="mb-4">
      Under GDPR, we process your personal data based on the following legal bases:
    </p>
    <div class="space-y-2">
      <div class="flex items-start space-x-3">
        <span class="text-green-600 font-bold">✓</span>
        <div>
          <strong>Legitimate Interest:</strong> Website operation, security, and improvement
        </div>
      </div>
      {{ if $config.privacy.cookieConsent }}
      <div class="flex items-start space-x-3">
        <span class="text-blue-600 font-bold">✓</span>
        <div>
          <strong>Consent:</strong> Analytics, advertising, and marketing activities
        </div>
      </div>
      {{ else }}
      <div class="flex items-start space-x-3">
        <span class="text-green-600 font-bold">✓</span>
        <div>
          <strong>Legitimate Interest:</strong> Analytics and performance optimization
        </div>
      </div>
      {{ end }}
    </div>
  </section>
</div>