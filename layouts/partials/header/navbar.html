<!-- Enhanced Responsive Header Navigation with Mobile-First Design -->
<nav id="navigation" class="sticky top-0 z-50 bg-background/90 backdrop-blur-md border-b border-border/50 transition-all duration-300 safe-area-inset-top" role="navigation" aria-label="{{ i18n "mainNavigation" | default "Main navigation" }}">
  <div class="container mx-auto mobile-px">
    <div class="flex items-center justify-between h-14 sm:h-16 lg:h-18">
      <!-- Enhanced Responsive Logo -->
      <div class="flex items-center min-w-0 flex-1 sm:flex-initial">
        <a href="{{ "/" | relLangURL }}" 
           class="responsive-text-xl sm:text-2xl lg:text-3xl font-bold gradient-text hover-scale-sm transition-transform duration-200 truncate touch-target micro-bounce focus-enhanced"
           aria-label="{{ .Site.Title }} - {{ i18n "home" | default "Home" }}">
          {{ .Site.Title }}
        </a>
      </div>
      
      <!-- Enhanced Desktop Navigation with Better Responsive Design -->
      <div class="hidden md:flex items-center space-x-1 lg:space-x-2 xl:space-x-3" role="menubar" aria-label="{{ i18n "primaryNavigation" | default "Primary navigation" }}">
        {{ range .Site.Menus.main }}
        <a href="{{ .URL | relLangURL }}" 
           role="menuitem"
           class="relative touch-target px-3 lg:px-4 py-2 lg:py-2.5 responsive-text-sm lg:text-base font-medium text-foreground/80 hover:text-primary transition-all duration-200 rounded-lg hover:bg-muted/50 group nav-item-hover focus-enhanced {{ if $.IsMenuCurrent "main" . }}nav-active text-primary bg-muted/30{{ end }}"
           {{ if $.IsMenuCurrent "main" . }}aria-current="page"{{ end }}
           tabindex="0">
          {{ .Name }}
          <!-- Enhanced active state indicator -->
          <span class="absolute bottom-1 left-1/2 w-0 h-0.5 bg-primary rounded-full transition-all duration-300 group-hover:w-3/4 group-hover:left-1/8 {{ if $.IsMenuCurrent "main" . }}w-3/4 left-1/8{{ end }}" aria-hidden="true"></span>
        </a>
        {{ end }}
      </div>
      
      <!-- Enhanced Search, Language Switcher and Mobile Menu Actions -->
      <div class="flex items-center space-x-1 sm:space-x-2 lg:space-x-3 interactive-spacing">
        <!-- Enhanced Search Icon -->
        <a href="{{ "/search" | relLangURL }}" 
           class="touch-target p-2.5 lg:p-3 text-muted-foreground hover:text-primary hover:bg-muted/50 rounded-lg transition-all duration-200 group hover-scale micro-bounce focus-enhanced"
           aria-label="{{ i18n "searchArticles" | default "Search articles" }}"
           title="{{ i18n "search" | default "Search" }}"
           tabindex="0">
          <svg class="w-5 h-5 lg:w-6 lg:h-6 group-hover:scale-110 transition-transform duration-200 micro-wiggle" 
               fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true" focusable="false">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </a>
        
        <!-- Language Switcher (Desktop) -->
        <div class="hidden md:block">
          {{ partial "header/language-switcher.html" . }}
        </div>
        
        <!-- Enhanced Mobile Menu Button -->
        <button data-mobile-menu-button 
                type="button"
                class="md:hidden touch-target p-2.5 text-muted-foreground hover:text-primary hover:bg-muted/50 rounded-lg transition-all duration-200 focus-enhanced active:scale-95"
                aria-expanded="false"
                aria-label="{{ i18n "toggleMenu" | default "Toggle menu" }}"
                aria-controls="mobile-menu"
                aria-haspopup="true"
                tabindex="0">
          <span class="sr-only">{{ i18n "toggleMenu" | default "Toggle menu" }}</span>
          <!-- Enhanced Hamburger Icon -->
          <svg class="w-6 h-6 transition-all duration-300" 
               fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true" focusable="false"
               data-menu-icon="hamburger">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" 
                  d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
          <!-- Enhanced Close Icon -->
          <svg class="w-6 h-6 transition-all duration-300 hidden" 
               fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true" focusable="false"
               data-menu-icon="close">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" 
                  d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
    </div>
  </div>
  
  <!-- Include Mobile Menu Component -->
  {{ partial "header/mobile-menu.html" . }}
</nav>